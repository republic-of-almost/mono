#!lua

--[[
  GLFW Project Description
]]--

table.insert(
  projects,
  {
    name     = "GLFW",
    kind     = "StaticLib",
    language = "C",
    location = make.get_proj_root(),
    ignore_defaults = true,

    inc_dirs = {
      make.get_proj_root() .. "../include/",
    },

    src_files = {
      make.add_headers(make.get_proj_root() .. "../include/"),
      --
      make.get_proj_root() .. "../src/init.c",
      make.get_proj_root() .. "../src/input.c",
      make.get_proj_root() .. "../src/monitor.c",
      make.get_proj_root() .. "../src/context.c",
      make.get_proj_root() .. "../src/window.c",
      make.get_proj_root() .. "../src/vulkan.c",
      make.get_proj_root() .. "../src/egl_context.c",
      make.get_proj_root() .. "../src/osmesa_context.c",
    },

    -- OSX Setup

    src_files_macosx = {
      -- Common Nix
      make.add_headers(make.get_proj_root() .. "../src/"),
      make.get_proj_root() .. "../src/posix_thread.c",
      make.get_proj_root() .. "../src/egl_context.c",
      make.get_proj_root() .. "../src/osmesa_context.c",
      -- Cocoa
      make.get_proj_root() .. "../src/cocoa_init.m",
      make.get_proj_root() .. "../src/cocoa_joystick.m",
      make.get_proj_root() .. "../src/cocoa_monitor.m",
      make.get_proj_root() .. "../src/cocoa_time.c",
      make.get_proj_root() .. "../src/cocoa_window.m",
      make.get_proj_root() .. "../src/nsgl_context.m",
    },

    link_dependencies_macosx = {
      "OpenGL.framework",
      "Cocoa.framework",
      "CoreFoundation.framework",
      "Foundation.framework",
      "CoreVideo.framework",
      "IOKit.framework",
    },

    defines_macosx = {
      "_GLFW_COCOA",
    },

    -- Linux Setup

    src_files_linux = {
      -- Common Nix
      make.add_headers(make.get_proj_root() .. "../src/"),
      make.get_proj_root() .. "../src/posix_thread.c",
      -- Linux
      make.get_proj_root() .. "../src/x11_init.c",
      make.get_proj_root() .. "../src/x11_monitor.c",
      make.get_proj_root() .. "../src/x11_window.c",
      make.get_proj_root() .. "../src/linux_joystick.c",
      make.get_proj_root() .. "../src/posix_time.c",
      make.get_proj_root() .. "../src/posix_thread.c",
      make.get_proj_root() .. "../src/glx_context.c",
      make.get_proj_root() .. "../src/xkb_unicode.c",
    },

    link_dependencies_linux = {
      "dl",
      "pthread",
      "GL",
      "Xrandr",
      "Xi",
      "Xrender",
      "drm",
      "Xdamage",
      "Xxf86vm",
      "Xext",
      "X11",
      "Xinerama",
      "Xcursor",
    },

    defines_linux = {
       "_GLFW_X11",
    },

    -- Windows Setup

    src_files_windows = {
      make.get_proj_root() .. "../src/win32_init.c",
      make.get_proj_root() .. "../src/win32_monitor.c",
      make.get_proj_root() .. "../src/win32_window.c",
      make.get_proj_root() .. "../src/win32_joystick.c",
      make.get_proj_root() .. "../src/win32_time.c",
      make.get_proj_root() .. "../src/win32_thread.c",
      make.get_proj_root() .. "../src/wgl_context.c",
    },

    link_dependencies_windows = {
      "opengl32",

    },

    defines_windows = {
       "_GLFW_WIN32",
    },

  }
)
